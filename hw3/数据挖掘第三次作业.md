# <center>数据挖掘第三次作业</center>

<center>闫子健 2020E8013382014 沈阳计算所</center>

## Part 1：written part

#### 1.（a）

min_sup = 0.4

|        | a    | b    | c    | d    | e    |
| ------ | ---- | ---- | ---- | ---- | ---- |
| sup(x) | 0.7  | 0.6  | 0.5  | 0.5  | 0.8  |

故a, b, c, d, e均为频繁集

|        | ab   | ac   | ad   | ae   |
| ------ | ---- | :--- | ---- | ---- |
| sup(x) | 0.4  | 0.3  | 0.4  | 0.6  |

|        | bc   | bd   | be   |
| ------ | ---- | ---- | ---- |
| sup(x) | 0.3  | 0.2  | 0.5  |

|        | cd   | ce   | de   |
| ------ | ---- | ---- | ---- |
| sup(x) | 0.2  | 0.3  | 0.5  |

故频繁集有ab, ad, ae, be, de

|        | abe  | ade  |
| ------ | ---- | ---- |
| sup(x) | 0.3  | 0.4  |

故ade为频繁项集。

综上，频繁项集有**{a}, {b}, {c}, {d}, {e}, {ab}, {ad}, {ae}, {be}, {de}, {ade}**

#### （b）

confidence（{a,b}=>{c}）= count(a,b,c)/count(a,b) =  2/4 = 0.5

confidence({c}=>{a,b}) =  count(a,b,c)/count(c) = 2/5 = 0.4

故不是对称测量。

#### （c）

有频繁项集***{ade}***

​	对于频繁项集ade，有频繁子集{a},{d},{e},{ad},{ae},{de}

​	那么可以得到的规则如下：

|            | a^d => e | a^e => d | d^e => a |
| ---------- | -------- | -------- | -------- |
| confidence | 1        | 0.667    | 0.8      |



故有buys(X, a) ∧buys(X, d) => buys(X, e)      0.4      1

​		buys(X, d) ∧buys(X, e) => buys(X, a)	    0.4	  0.8



#### 2.(a)

![image-20201112183610043](C:\Users\64957\AppData\Roaming\Typora\typora-user-images\image-20201112183610043.png)

| Items Bought | (Ordered)frequent items |
| ------------ | ----------------------- |
| {a,d,e}      | {e, a, d}               |
| {a,b,c,e}    | {e, a, b, c}            |
| {a,b,d,e}    | {e, a, b, d}            |
| {a,c,d,e}    | {e, a, c, d}            |
| {b,c,e}      | {e, b, c}               |
| {b,d,e}      | {e, b, d}               |
| {c,d}        | {c, d}                  |
| {a,b,c}      | {a, b, c}               |
| {a,d,e}      | {e, a, d}               |
| {a,b,e}      | {e, a, b}               |

**FP-tree如下：**

![image-20201112195500566](C:\Users\64957\AppData\Roaming\Typora\typora-user-images\image-20201112195500566.png)

**Conditional pattern bases**

| item | cond. pattern base       |
| ---- | ------------------------ |
| a    | e:6                      |
| b    | ea:3, e:2, a:1           |
| c    | eab:1, ea:1, eb:1, ab:1  |
| d    | ea:2, eab:1, eac:1, c:1, |

#### (b)

fpgrowth比apriori更快一些

#### 3.（a）

- 计算平均值

$$
\overline{r}_{User 1} = \frac{1+1+5+3}{4}=2.5
$$

$$
\overline{r}_{User 2} = \frac{4+5+3}{3}=4
$$

$$
\overline{r}_{User 3} = \frac{1+3+1+1}{4}=1.5
$$

$$
\overline{r}_{User 4} = \frac{4+3+2+1}{4}=2.5
$$

$$
\overline{r}_{User 5} = \frac{2+2+2+4}{4}=2.5
$$



- 计算item-item similarity

$$
cos(User2, User1) = \frac{1\times3+5\times5+3\times4}{\sqrt35\sqrt50}=0.956
$$

$$
cos(User2, User3) = \frac{1\times3+1\times5+1\times4}{\sqrt3\sqrt50}=0.980
$$

$$
cos(User2, User4) = \frac{4\times3+2\times5+1\times4}{\sqrt21\sqrt50}=0.802
$$

$$
cos(User2, User5) = \frac{2\times3+2\times5+4\times4}{\sqrt24\sqrt50}=0.924
$$

- Predict User 2’s rating for Product 2. Assume that neighborhood size = 2

$$
r_{User2, Product2} =4+\frac{0.980(3-1.5)+0.956(1-2.5)}{0.980+0.956}=4.02
$$



## Part 2:Lab part

#### 1.

**The list of association rules generated by the model： **

<img src="C:\Users\64957\AppData\Roaming\Typora\typora-user-images\image-20201115120222238.png" alt="image-20201115120222238" style="zoom: 50%;" />

- **Sort the rules by lift**

| support | confidence | lift  | Consequent | Antecedent1  | Antecdent1 |
| ------- | ---------- | ----- | ---------- | ------------ | ---------- |
| 11.6    | 53.2       | 1.52  | pasta      | tomato souce |            |
| 7.5     | 45.5       | 1.3   | pasta      | coffee       | milk       |
| 8.3     | 53.2       | 1.155 | milk       | juices       |            |
| 15.2    | 52.2       | 1.131 | milk       | yoghurt      |            |
| 20.5    | 51.5       | 1.117 | milk       | biscuits     |            |
| 15      | 49.9       | 1.081 | milk       | coffee       |            |

本来有一个milk和tomato souce关联的规则，不过不知道买牛奶的为啥还想买番茄酱，感觉逻辑上没有实际关联 就去掉了。

- **Sort the rules by support**

| support | confidence | lift  | Consequent | Antecedent1  | Antecdent1 |
| ------- | ---------- | ----- | ---------- | ------------ | ---------- |
| 35      | 45.9       | 0.994 | milk       | pasta        |            |
| 20.5    | 51.5       | 1.117 | milk       | biscuits     |            |
| 15.3    | 49.7       | 1.077 | milk       | brioches     |            |
| 15.2    | 52.2       | 1.131 | milk       | yoghurt      |            |
| 15      | 49.9       | 1.081 | milk       | coffee       |            |
| 11.6    | 53.2       | 1.520 | pasta      | tomato souce |            |

单纯从支持度来看，很多人都很喜欢在买牛奶时买一些固态的物品来吃，比如说意大利面，饼干，奶油卷之类的。同时，一部分人在购买牛奶时，尝尝也会购买其他的饮品，比如说酸奶，咖啡等。

- **Sort the rules by confidence**

| support | confidence | lift  | Consequent | Antecedent1  | Antecdent1 |
| ------- | ---------- | ----- | ---------- | ------------ | ---------- |
| 11.6    | 53.2       | 1.5   | pasta      | tomato souce |            |
| 15.2    | 52.2       | 1.131 | milk       | yoghurt      |            |
| 20.5    | 51.5       | 1.117 | milk       | biscuits     |            |
| 15      | 59.9       | 1.081 | milk       | coffee       |            |
| 15.3    | 49.7       | 1.077 | milk       | brioches     |            |
| 10.7    | 47.3       | 1.025 | milk       | coke         |            |

从置信度来说，有很高的可能性人们在买意大利面的时候会买番茄酱拌入其中一起吃。